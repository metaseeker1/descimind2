"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.convertBit = convertBit;
const address_js_1 = require("../../errors/address.js");
function convertBit(buffer, inBits, outBits, isPad = false) {
    const mask = (1 << outBits) - 1;
    const array = [];
    let bits = 0;
    let value = 0;
    for (const byte of buffer) {
        bits += inBits;
        value = (value << inBits) | byte;
        while (bits >= outBits) {
            bits -= outBits;
            array.push((value >>> bits) & mask);
        }
    }
    value = (value << (outBits - bits)) & mask;
    if (bits && isPad) {
        array.push(value);
    }
    else if (value && !isPad) {
        throw new address_js_1.ConvertBitExcessPaddingError();
    }
    else if (bits >= inBits && !isPad) {
        throw new address_js_1.ConvertBitNonZeroPaddingError();
    }
    return array;
}
//# sourceMappingURL=convertBit.js.map